/*
 * jQuery Filter JSON Plugin
 * Copyright (c) 2012 Kapil Kashyap
 *
 * Depends:
 *   - jQuery 1.6+
 *
 * Dual licensed under the MIT and GPL licenses:
 *   - http://www.opensource.org/licenses/mit-license.php
 *   - http://www.gnu.org/licenses/gpl.html
 */
(function(a){a.extend(a.fn,{filterJSON:function(b,c){var d={property:null,value:"",wrapper:false,checkContains:false,startsWith:false,matchCase:false,avoidDuplicates:false},e=function(b,c){var d=null;if(a.isEmptyObject(c.property)||!c.property[0]){d="config.property is required to filter the JSON object."}if(!a.isEmptyObject(d)){if(window.console){console.error?console.error(d):console.log(d)}else{alert(d)}return}if(b&&typeof b=="object"){a.each(b,function(d,g){if(a.inArray(d,c.property)!=-1){var h=function(b,d){var e=c.wrapper?b:d;if(c.avoidDuplicates){if(a.inArray(e,f.filteredJSON)==-1){f.filteredJSON.push(e)}}else{f.filteredJSON.push(e)}};if(c.value){var i={},j=Object.prototype.toString.call(g),l=function(d,f,g){if(d==="[object String]"){var j=f.toLowerCase(),m=g.toLowerCase();if(!c.matchCase){if(j==m||!c.startsWith&&c.checkContains&&j.indexOf(m)!=-1||c.startsWith&&j.indexOf(m)==0){h(b,f)}}else{if(f==g||!c.startsWith&&c.checkContains&&f.indexOf(g)!=-1||c.startsWith&&f.indexOf(g)==0){h(b,f)}}}else if(d==="[object Number]"){if(f===parseInt(g)||f===parseFloat(g)){h(b,f)}}else if(d==="[object Boolean]"){var n=false;if(Object.prototype.toString.call(g)==="[object String]"){if(g.toLowerCase()=="true"){n=true}}if(f===n){h(b,f)}}else if(d==="[object Array]"){if(f.length>0){for(k in f){l(Object.prototype.toString.call(f[k]),f[k],g)}}}else if(d==="[object Object]"){a.extend(i,c,{value:g});e(f,i)}};l(j,g,c.value)}else{h(b,g)}}e(g,c)})}return f},f={filteredJSON:[]},g=null,h=null,i=null;a.extend(d,c);i=d.property;if(Object.prototype.toString.call(i)==="[object String]"){i=i.replace(/\s/g,"");d.property=i.split(",")}i=null;if(d.wrapper&&d.property&&d.property.length>1&&c.avoidDuplicates==undefined){d.avoidDuplicates=true}g=e(b,d);if(g&&g.filteredJSON){h=g.filteredJSON.length>0?g.filteredJSON:g.filteredJSON[0]}return a(h)}})})(jQuery)